<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Merkle Tree Library: Merkle Tree Implementation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Merkle Tree Library<span id="projectnumber">&#160;v1.0</span>
   </div>
   <div id="projectbrief">A high-performance C implementation of n-ary Merkle trees with SHA-256 hashing</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md_README.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Merkle Tree Implementation </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md82"></a></p>
<p>A robust, n-ary Merkle Tree implementation in C with comprehensive testing and documentation. This cryptographic data structure efficiently verifies data integrity and consistency, making it ideal for blockchain technologies, distributed systems, and cryptographic applications.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md83"></a>
✨ Features</h1>
<ul>
<li><b>N-ary Merkle Trees</b>: Configurable branching factor (binary, ternary, or any n-ary tree)</li>
<li><b>SHA-256 Hashing</b>: Cryptographically secure hashing using OpenSSL</li>
<li><b>Queue-based Construction</b>: Efficient bottom-up tree building algorithm</li>
<li><b>Memory Safe</b>: Comprehensive error handling and memory management</li>
<li><b>Opaque API</b>: Clean public interface with implementation details hidden</li>
<li><b>Merkle Proofs</b>: Generate and verify proofs for individual leaves</li>
<li><b>Thread-Safe API</b>: Read/write locking for concurrent access</li>
<li><b>Comprehensive Tests</b>: Full unit test suite with memory leak detection</li>
<li><b>Documentation</b>: Complete Doxygen-generated API documentation</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md84"></a>
📁 Project Structure</h1>
<div class="fragment"><div class="line">merkle-tree/</div>
<div class="line">├── src/                          # Source files</div>
<div class="line">│   ├── merkle_tree.c            # Core Merkle tree implementation</div>
<div class="line">│   ├── merkle_queue.c           # Queue data structure for tree construction</div>
<div class="line">│   └── merkle_utils.c           # Memory management utilities</div>
<div class="line">├── include/                      # Header files</div>
<div class="line">│   ├── Merkle.h                 # Public Merkle tree API</div>
<div class="line">│   ├── MerkleQueue.h            # Queue interface</div>
<div class="line">│   └── Utils.h                  # Utility functions and macros</div>
<div class="line">├── tests/                       # Test suite</div>
<div class="line">│   ├── test_merkle_tree.c       # Comprehensive unit tests</div>
<div class="line">│   ├── Makefile                 # Test build system</div>
<div class="line">│   └── run_tests.sh             # Test runner script</div>
<div class="line">├── docs/                        # Generated documentation</div>
<div class="line">└── .vscode/                     # VS Code configuration</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md85"></a>
🚀 Quick Start</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md86"></a>
Prerequisites</h2>
<ul>
<li><b>C Compiler</b>: clang or gcc with C11 support</li>
<li><b>OpenSSL 3.x</b>: For SHA-256 hashing</li>
<li><b>Make</b>: For building tests</li>
<li><b>Valgrind</b> (optional): For memory leak detection</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md87"></a>
macOS Installation:</h3>
<div class="fragment"><div class="line"># Install dependencies</div>
<div class="line">brew install openssl@3 make</div>
<div class="line"> </div>
<div class="line"># Install Valgrind (optional)</div>
<div class="line">brew install valgrind</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md88"></a>
Ubuntu Installation:</h3>
<div class="fragment"><div class="line">sudo apt-get update</div>
<div class="line">sudo apt-get install build-essential libssl-dev valgrind</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md89"></a>
Building and Testing</h2>
<div class="fragment"><div class="line"># Clone the repository</div>
<div class="line">git clone &lt;repository-url&gt;</div>
<div class="line">cd merkle-tree</div>
<div class="line"> </div>
<div class="line"># Run the test suite</div>
<div class="line">cd tests</div>
<div class="line">chmod +x run_tests.sh</div>
<div class="line">./run_tests.sh</div>
<div class="line"> </div>
<div class="line"># Or build and test with make</div>
<div class="line">make test</div>
<div class="line"> </div>
<div class="line"># Run with memory leak detection</div>
<div class="line">./run_tests.sh --memory</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md90"></a>
VS Code Development</h2>
<p>The project includes complete VS Code configuration:</p>
<ul>
<li><b>Build</b>: <span class="tt">Ctrl+Shift+B</span></li>
<li><b>Run Tests</b>: <span class="tt">Ctrl+Shift+T</span></li>
<li><b>Debug Tests</b>: <span class="tt">F5</span></li>
<li><b>Memory Check</b>: <span class="tt">Ctrl+Shift+M</span></li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md91"></a>
📖 Usage</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md92"></a>
Basic Example</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Merkle_8h.html">Merkle.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="test__merkle__tree_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a>() {</div>
<div class="line">    <span class="comment">// Sample data</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *data[] = {<span class="stringliteral">&quot;Hello&quot;</span>, <span class="stringliteral">&quot;World&quot;</span>, <span class="stringliteral">&quot;Merkle&quot;</span>, <span class="stringliteral">&quot;Tree&quot;</span>};</div>
<div class="line">    <span class="keywordtype">size_t</span> sizes[] = {5, 5, 6, 4};</div>
<div class="line">    <span class="keywordtype">size_t</span> count = 4;</div>
<div class="line">    <span class="keywordtype">size_t</span> branching_factor = 2;  <span class="comment">// Binary tree</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create Merkle tree</span></div>
<div class="line">    <a class="code hl_typedef" href="Merkle_8h.html#a764b87014a84f1e0efa1412150f310cf">merkle_tree_t</a> *<a class="code hl_variable" href="namespacepython__ctypes__example.html#a2e0b3c7c30dc87306128d3c0d7e8de1a">tree</a> = merkle_tree_create(</div>
<div class="line">        (<span class="keyword">const</span> <span class="keywordtype">void</span> **)data, sizes, count, branching_factor</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (tree) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Merkle tree created successfully!\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Clean up</span></div>
<div class="line">        merkle_tree_destroy(tree);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Failed to create Merkle tree\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aMerkle_8h_html"><div class="ttname"><a href="Merkle_8h.html">Merkle.h</a></div><div class="ttdoc">Public API for Merkle tree creation and destruction using SHA-256.</div></div>
<div class="ttc" id="aMerkle_8h_html_a764b87014a84f1e0efa1412150f310cf"><div class="ttname"><a href="Merkle_8h.html#a764b87014a84f1e0efa1412150f310cf">merkle_tree_t</a></div><div class="ttdeci">struct merkle_tree merkle_tree_t</div><div class="ttdoc">Typedef for the opaque Merkle tree structure.</div><div class="ttdef"><b>Definition</b> <a href="Merkle_8h_source.html#l00058">Merkle.h:58</a></div></div>
<div class="ttc" id="anamespacepython__ctypes__example_html_a2e0b3c7c30dc87306128d3c0d7e8de1a"><div class="ttname"><a href="namespacepython__ctypes__example.html#a2e0b3c7c30dc87306128d3c0d7e8de1a">python_ctypes_example.tree</a></div><div class="ttdeci">ctypes.c_void_p tree</div><div class="ttdef"><b>Definition</b> <a href="python__ctypes__example_8py_source.html#l00243">python_ctypes_example.py:243</a></div></div>
<div class="ttc" id="atest__merkle__tree_8c_html_a840291bc02cba5474a4cb46a9b9566fe"><div class="ttname"><a href="test__merkle__tree_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a></div><div class="ttdeci">int main(void)</div><div class="ttdoc">Main test runner.</div><div class="ttdef"><b>Definition</b> <a href="test__merkle__tree_8c_source.html#l01559">test_merkle_tree.c:1559</a></div></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md93"></a>
Advanced Configuration</h2>
<div class="fragment"><div class="line"><span class="comment">// Create a ternary Merkle tree (3 children per node)</span></div>
<div class="line"><a class="code hl_typedef" href="Merkle_8h.html#a764b87014a84f1e0efa1412150f310cf">merkle_tree_t</a> *ternary_tree = merkle_tree_create(data, sizes, count, 3);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a tree with large branching factor</span></div>
<div class="line"><a class="code hl_typedef" href="Merkle_8h.html#a764b87014a84f1e0efa1412150f310cf">merkle_tree_t</a> *wide_tree = merkle_tree_create(data, sizes, count, 8);</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md94"></a>
Error Handling</h2>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="Merkle_8h.html#a764b87014a84f1e0efa1412150f310cf">merkle_tree_t</a> *tree = merkle_tree_create(data, sizes, count, branching_factor);</div>
<div class="line"><span class="keywordflow">if</span> (!tree) {</div>
<div class="line">    <span class="comment">// Handle errors:</span></div>
<div class="line">    <span class="comment">// - NULL or invalid input parameters</span></div>
<div class="line">    <span class="comment">// - Memory allocation failures</span></div>
<div class="line">    <span class="comment">// - Tree construction failures</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;Tree creation failed\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">}</div>
</div><!-- fragment --> <h1 class="doxsection"><a class="anchor" id="autotoc_md95"></a>
🐍 Python Integration</h1>
<p>Build the shared library and use it from Python with <span class="tt">ctypes</span>. First build <span class="tt">libmerkle.so</span>:</p>
<div class="fragment"><div class="line">make</div>
</div><!-- fragment --><p>Then run the example script:</p>
<div class="fragment"><div class="line">python examples/python_ctypes_example.py</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md96"></a>
🧪 Testing</h1>
<p>The project includes a comprehensive test suite covering:</p>
<ul>
<li>✅ <b>Input Validation</b>: NULL pointers, invalid sizes, edge cases</li>
<li>✅ <b>Functionality</b>: Tree creation, destruction, various configurations</li>
<li>✅ <b>Correctness</b>: Hash consistency and cryptographic properties</li>
<li>✅ <b>Memory Safety</b>: Leak detection and proper cleanup</li>
<li>✅ <b>Performance</b>: Large datasets and stress testing</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md97"></a>
Running Tests</h2>
<div class="fragment"><div class="line">cd tests</div>
<div class="line"> </div>
<div class="line"># Basic test run</div>
<div class="line">./run_tests.sh</div>
<div class="line"> </div>
<div class="line"># With verbose output</div>
<div class="line">./run_tests.sh --verbose</div>
<div class="line"> </div>
<div class="line"># With memory leak detection</div>
<div class="line">./run_tests.sh --memory</div>
<div class="line"> </div>
<div class="line"># With debug output</div>
<div class="line">./run_tests.sh --debug</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md98"></a>
📚 Documentation</h1>
<p>Complete API documentation is generated with Doxygen:</p>
<ul>
<li><b>Browse</b>: Open <a href="docs/index.html"><span class="tt">docs/index.html</span></a> in your browser</li>
<li><b>Regenerate</b>: Run <span class="tt">doxygen Doxyfile</span> from project root</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md99"></a>
Key API Functions</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Function  </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">merkle_tree_create()</span>  </td><td class="markdownTableBodyNone">Create a Merkle tree from data blocks  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">merkle_tree_destroy()</span>  </td><td class="markdownTableBodyNone">Free all memory associated with a tree  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt"><a class="el" href="Merkle_8h.html#a05f0004d6d9bb58fe719c40d73a0afd2" title="Returns the Merkle Tree root&#39;s hash.">get_tree_hash()</a></span>  </td><td class="markdownTableBodyNone">Retrieve the root hash of a tree  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt"><a class="el" href="Merkle_8h.html#abb2327ddaea6ba98c20196322df2b43f" title="Generates a Merkle proof for a leaf at the specified index.">generate_proof_from_index()</a></span>  </td><td class="markdownTableBodyNone">Create a proof for a leaf by index  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt"><a class="el" href="Merkle_8h.html#aa14110838bef0e07d43080456fcdc235" title="Generates a Merkle proof for a leaf found using a custom finder function.">generate_proof_by_finder()</a></span>  </td><td class="markdownTableBodyNone">Create a proof using a custom finder  </td></tr>
</table>
<h2 class="doxsection"><a class="anchor" id="autotoc_md100"></a>
Error Codes</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Code  </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">MERKLE_SUCCESS</span>  </td><td class="markdownTableBodyNone">Operation completed successfully  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">MERKLE_NULL_ARG</span>  </td><td class="markdownTableBodyNone">NULL argument passed to function  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">MERKLE_FAILED_MEM_ALLOC</span>  </td><td class="markdownTableBodyNone">Memory allocation failed  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">MERKLE_BAD_LEN</span>  </td><td class="markdownTableBodyNone">Invalid length or size argument  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">MERKLE_FAILED_TREE_BUILD</span>  </td><td class="markdownTableBodyNone">Tree construction failed  </td></tr>
</table>
<h1 class="doxsection"><a class="anchor" id="autotoc_md101"></a>
🏗️ Algorithm Overview</h1>
<p>The implementation uses a queue-based, bottom-up approach:</p>
<ol type="1">
<li><b>Hash Generation</b>: Each data block is hashed using SHA-256</li>
<li><b>Queue Processing</b>: Hashed blocks are placed in a processing queue</li>
<li><b>Level Construction</b>: Nodes are grouped by branching factor and combined</li>
<li><b>Tree Assembly</b>: Process continues until a single root node remains</li>
<li><b>Root Hash</b>: The final root contains the cryptographic digest of all data</li>
</ol>
<p>This approach efficiently handles any branching factor and automatically balances the tree structure.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md102"></a>
🔧 Configuration</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md103"></a>
Compile-Time Options</h2>
<ul>
<li><span class="tt">MERKLE_DEBUG</span>: Enable debug output for memory operations</li>
<li><span class="tt">HASH_SIZE</span>: SHA-256 hash size (32 bytes, not recommended to change)</li>
<li>Custom branching factors supported at runtime</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md104"></a>
Memory Management</h2>
<p>The implementation uses custom memory management with optional debugging:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define MMalloc(x) Merkle_Malloc(x, __FILE__, __LINE__)</span></div>
<div class="line"><span class="preprocessor">#define MFree(x) Merkle_Free(x, __FILE__, __LINE__)</span></div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md105"></a>
🤝 Contributing</h1>
<ol type="1">
<li>Fork the repository</li>
<li>Create a feature branch: <span class="tt">git checkout -b feature-name</span></li>
<li>Run tests: <span class="tt">cd tests &amp;&amp; ./run_tests.sh</span></li>
<li>Ensure memory safety: <span class="tt">./run_tests.sh --memory</span></li>
<li>Submit a pull request</li>
</ol>
<h1 class="doxsection"><a class="anchor" id="autotoc_md106"></a>
🐛 Troubleshooting</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md107"></a>
Build Issues</h2>
<p><b>OpenSSL not found:</b></p>
<div class="fragment"><div class="line"># Update OpenSSL path in Makefile</div>
<div class="line">OPENSSL_ROOT = $(shell brew --prefix openssl@3)</div>
</div><!-- fragment --><p><b>Deprecation warnings:</b></p>
<div class="fragment"><div class="line"># Already handled in Makefile with -Wno-deprecated-declarations</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md108"></a>
Runtime Issues</h2>
<p><b>Segmentation faults:</b></p>
<ul>
<li>Run with debug symbols: <span class="tt">make test-debug</span></li>
<li>Use memory checker: <span class="tt">./run_tests.sh --memory</span></li>
<li>Check for NULL input data or zero sizes</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md109"></a>
📄 License</h1>
<p>This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
